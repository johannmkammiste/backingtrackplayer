{% extends "base.html" %}

{% block sidebar %}
    <div class="songs-sidebar">
        <div class="songs-list">
            <div class="song-item active" data-section="audio-output">
                <span class="song-name">Audio Output</span>
            </div>
            <div class="song-item" data-section="keyboard-control">
                <span class="song-name">Keyboard Control</span></div>
            <div class="song-item" data-section="file-management">
                <span class="song-name">File Management</span>
            </div>
            <div class="song-item" data-section="danger-zone">
                <span class="song-name">Danger Zone</span>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="song-editor" id="settings-editor">
        <div class="song-form" id="audio-output-section">
            <div class="song-header">
                <h2>Audio Output Settings</h2>
            </div>

            <div class="settings-section">
                <h3>Device & Channel Mapping</h3>
                <div id="audio-output-mappings">
                    <p>Loading configuration...</p>
                </div>
                <div class="settings-actions">
                     <button id="add-mapping-btn" class="settings-button add">ï¼‹ Add Output Mapping</button>
                </div>
            </div>

            <div class="settings-section">
                 <h3>Global Audio Settings</h3>
                 {# Sample Rate Selector Row #}
                 <div class="meta-row">
                     <label for="sample-rate-select">Target Sample Rate:</label>
                     <select id="sample-rate-select" class="settings-select">
                         <option value="44100">44100 Hz</option>
                         <option value="48000">48000 Hz</option>
                     </select>
                     <span class="setting-hint">(Affects playback resampling)</span>
                 </div>
                 {# Global Volume Row #}
                 <div class="meta-row">
                     <label for="global-volume-control">Global Volume:</label>
                     <input type="range" id="global-volume-control" min="0" max="100" value="100" class="settings-select volume-slider">
                     <span class="volume-value" id="global-volume-value">100%</span>
                 </div>
            </div>

            <div class="settings-actions main-actions">
                 <button id="save-audio-settings-btn" class="action-button save">Save Audio Settings</button>
                 <span id="audio-save-status" class="save-status"></span>
            </div>
       </div>

         <div class="song-form" id="keyboard-control-section" style="display: none;">
            <div class="song-header">
                <h2>Keyboard Control</h2>
                <div class="song-meta">
                    <div class="meta-row">
                        <label>
                            <input type="checkbox" id="keyboard-enabled">
                            Enable Keyboard Shortcuts
                        </label>
                    </div>

                    <h3>Keyboard Shortcuts</h3>
                    <div class="settings-shortcut-row">
                        <label>Play/Pause:</label>
                        <span class="shortcut-display" id="shortcut-play_pause-display">Not Set</span>
                        <button class="learn-keyboard-btn" data-action="play_pause">Learn</button>
                    </div>
                    <div class="settings-shortcut-row">
                        <label>Stop:</label>
                        <span class="shortcut-display" id="shortcut-stop-display">Not Set</span>
                        <button class="learn-keyboard-btn" data-action="stop">Learn</button>
                    </div>
                    <div class="settings-shortcut-row">
                        <label>Next Song:</label>
                        <span class="shortcut-display" id="shortcut-next-display">Not Set</span>
                        <button class="learn-keyboard-btn" data-action="next">Learn</button>
                    </div>
                    <div class="settings-shortcut-row">
                        <label>Previous Song:</label>
                        <span class="shortcut-display" id="shortcut-previous-display">Not Set</span>
                        <button class="learn-keyboard-btn" data-action="previous">Learn</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- File Management Section -->
        <div class="song-form" id="file-management-section" style="display: none;">
            <div class="song-header">
                <h2>File Management</h2>
                <div class="song-meta">
                    <div class="meta-row">
                        <button id="open-audio-dir" class="settings-button">
                            Open Audio Directory
                        </button>
                    </div>
                    <div class="meta-row">
                        <button id="clear-cache" class="settings-button">
                            Clear Application Cache
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Danger Zone Section -->
        <div class="song-form" id="danger-zone-section" style="display: none;">
            <div class="song-header">
                <h2>Danger Zone</h2>
                <div class="song-meta">
                    <div class="meta-row">
                        <p>These actions cannot be undone. Proceed with caution.</p>
                    </div>
                    <div class="meta-row">
                        <button id="factory-reset" class="settings-button danger">
                            Factory Reset
                        </button>
                    </div>
                    <div class="meta-row">
                        <button id="delete-all-songs" class="settings-button danger">
                            Delete All Songs
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/input-control.js') }}"></script>

{% endblock %}